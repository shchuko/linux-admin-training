# Лабораторная работа №2

## Управление разделами дисковой системы, создание и монтирование файловых систем

### Задачи

1) Научиться создавать, изменять и удалять разделы на жестких дисках.

2) Научиться создавать и настраивать файловые системы.

3) Научиться монтировать файловые системы, находящиеся в локальном или сетевом доступе.

### Подсказки

1) В работе используются следующие команды (в дополнение к изученным в предыдущих лабораторных
работах): blkid, dumpe2fs, e2fsck, fdisk, lvcreate, mke2fs, mkfs.ext4, mount, mount.cifs, pvcreate, resize2fs, reboot,
tune2fs, umount, vgcreate.

2) Прочитайте документацию по указанным командам и определите их назначение до начала выполнения
заданий.

3) Параметры автоматического монтирования файловых систем при загрузке операционной системы задаются
в конфигурационном файле /etc/fstab.

4) Для получения подробного справочного руководства по любой команде можно набрать в консоли
«man название команды», для кратной справки — название_команды -h или название_команды --help.

5) Для удобства работы можно пользоваться одновременно несколькими консолями. На одной консоли читать
справочное руководство, на другой редактировать скрипт и т.п. Переключаться между ними можно нажатием
комбинации клавиш Alt+Fn, где Fn — функциональная клавиша (F1 — для первой консоли, F2- для второй, а
вот 7-я консоль обычно занята графическим интерфейсом).

### Задание

ВНИМАНИЕ! Перед началом работы создайте снимок виртуальной машины. Рекомендуется делать
снимки также перед выполнением пунктов 10 и 12 и 13.
Создайте текстовый файл в котором запишите последовательность команд для выполнения каждого из
нижеследующих заданий. Для команд, имеющих интерактивный интерфейс – опишите последовательность
выбора управляющих команд и их параметров. Если решение заключается в изменении конфигурационного
файла – укажите название файла и вносимые или изменяемые строки.

Требуемые действия.

1. Создайте новый раздел, начинающийся с первого свободного сектора и имеющий размер 300
МБайт.

2. Создайте файл в домашнем каталоге пользователя root и сохраните в него UUID созданного
раздела.

3. Создайте на созданном разделе файловую систему ext4 с размером блока 4096 байт.

4. Выведите на экран текущее состояние параметров, записанных в суперблоке созданной файловой
системы.

5. Настройте эту файловую систему таким образом, чтобы ее автоматическая проверка запускалась
через 2 месяца или каждое второе монтирование файловой системы.

6. Создайте в каталоге /mnt подкаталог newdisk и подмонтируйте в него созданную файловую
систему.

7. Создайте в домашнем каталоге пользователя root ссылку на смонтированную файловую систему

8. Создайте каталог с любым именем в смонтированной файловой системе.

9. Включите автомонтирование при запуске операционной системы созданной файловой системы в
/mnt/newdisk таким образом, чтобы было невозможно запускать исполняемые файлы, находящиеся
в этой системе, а также с отключением возможности записи времени последнего доступа к файлу
для ускорения работы с этой файловой системой. Перезагрузите операционную систему и
проверьте доступность файловой системы. Проверьте невозможность запустить исполняемый
файл, если он хранится в этой файловой системе.

10. Увеличьте размер раздела и файловой системы до 350 МБайт. Проверьте, что размер изменился.

11. Проверьте на наличие ошибок созданную файловую системы "в безопасном режиме", то есть в
режиме запрета внесения каких-либо изменений в файловую систему, даже если обнаружены 
ошибки.

12. Создайте новый раздел, размером в 12 Мбайт. Настройте файловую систему, созданную в пункте 3
таким образом, чтобы ее журнал был расположен на разделе, созданном в этом пункте.

13. Создайте два новых раздела, размером в 100 МБайт каждый.

14. Создайте группу разделов LVM и логический том LVM над созданными в предыдущем пункте
разделами. Создайте файловую систему ext4 для созданного логического тома LVM и
смонтируйте её в предварительно созданный каталог supernewdisk в каталоге mnt.

15. Создайте папку (каталог) в хостовой операционной системе и предоставьте к ней сетевой доступ,
создав сетевой ресурс на хостовой операционной системе. Создайте в директории /mnt
поддиректорию share и подмонтируйте в нее созданный сетевой ресурс.

16. Сделайте так, чтобы сетевой ресурс автоматически монтировалcя для чтения при загрузке
операционной системы. Перезагрузите операционную систему и проверьте, что автоматическое
монтирование ресурса выполнилось.

